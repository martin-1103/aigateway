# OAuth flow endpoints

getProviders:
  method: GET
  path: /api/v1/oauth/providers
  auth: none
  response:
    providers: OAuthProviderInfo[]

initFlow:
  method: POST
  path: /api/v1/oauth/init
  auth: Bearer JWT (admin | provider | user)
  body:
    provider: string              # required: antigravity
    account_name: string          # required: label for new account
    flow_type: string             # required: auto | manual
    redirect_uri: string          # optional, default: http://localhost:8088/api/v1/oauth/callback
  response:
    auth_url: string              # URL to redirect user for authorization
    state: string                 # OAuth state parameter
    flow_type: string             # auto | manual
    expires_at: datetime          # Session expiry (10 minutes)

callback:
  method: GET
  path: /api/v1/oauth/callback
  auth: none
  description: OAuth callback handler - returns HTML page
  query:
    code: string                  # Authorization code
    state: string                 # OAuth state
  response: text/html             # Success/error page that closes popup

exchange:
  method: POST
  path: /api/v1/oauth/exchange
  auth: Bearer JWT (admin | provider | user)
  description: Manual OAuth flow - exchange callback URL for tokens
  body:
    callback_url: string          # required: full callback URL with code & state
  response:
    success: boolean
    account: Account              # Created/updated account

refresh:
  method: POST
  path: /api/v1/oauth/refresh
  auth: Bearer JWT (admin | provider | user)
  body:
    account_id: string            # required: account UUID to refresh
  response:
    message: string               # "token refreshed successfully"

types:
  OAuthProviderInfo:
    id: string                    # Provider ID
    name: string                  # Provider display name
